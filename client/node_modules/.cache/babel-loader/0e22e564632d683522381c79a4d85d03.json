{"ast":null,"code":"import { parse } from \"papaparse\";\nexport const API_URL = \"https://processdrift.ai.wu.ac.at\"; // const API_URL = 'http://127.0.0.1:5000';\n\nconst cleanUpParams = params => Object.entries(params).reduce((acc, [key, value]) => {\n  if (value) {\n    acc[key] = value;\n  }\n\n  return acc;\n}, {});\n\nexport const uploadFile = body => fetch(`${API_URL}/uploadFile`, {\n  method: \"POST\",\n  body\n}).then(response => response.json()).catch(console.error);\nexport const makeDriftMap = ({\n  session_id,\n  params\n}) => {\n  let url = new URL(`${API_URL}/makeDriftMap`);\n  url.search = new URLSearchParams({\n    logName: session_id,\n    ...(params ? cleanUpParams(params) : {})\n  }).toString();\n  return fetch(url.toString()).then(response => response.json());\n};\nexport const parseErraticMeasureCsv = path => fetch(`${API_URL}${path}`).then(response => response.text()).then(res => parse(res, {\n  skipEmptyLines: true\n})).then(({\n  data,\n  errors\n}) => {\n  if (errors.length > 0) {\n    throw errors;\n  }\n\n  console.log({\n    data\n  });\n  return data.slice(1);\n}).catch(console.error);","map":{"version":3,"sources":["/Users/yesh/Documents/WritePrograms/Process-Drift-Visualization-With-Declare/client/src/apiService.ts"],"names":["parse","API_URL","cleanUpParams","params","Object","entries","reduce","acc","key","value","uploadFile","body","fetch","method","then","response","json","catch","console","error","makeDriftMap","session_id","url","URL","search","URLSearchParams","logName","toString","parseErraticMeasureCsv","path","text","res","skipEmptyLines","data","errors","length","log","slice"],"mappings":"AAAA,SAASA,KAAT,QAAmC,WAAnC;AAEA,OAAO,MAAMC,OAAO,GAAG,kCAAhB,C,CACP;;AAEA,MAAMC,aAAa,GAAIC,MAAD,IACpBC,MAAM,CAACC,OAAP,CAAeF,MAAf,EAAuBG,MAAvB,CAA8B,CAACC,GAAD,EAA8B,CAACC,GAAD,EAAMC,KAAN,CAA9B,KAA+C;AAC3E,MAAIA,KAAJ,EAAW;AACTF,IAAAA,GAAG,CAACC,GAAD,CAAH,GAAWC,KAAX;AACD;;AAED,SAAOF,GAAP;AACD,CAND,EAMG,EANH,CADF;;AAQA,OAAO,MAAMG,UAAU,GAAIC,IAAD,IACxBC,KAAK,CAAE,GAAEX,OAAQ,aAAZ,EAA0B;AAC7BY,EAAAA,MAAM,EAAE,MADqB;AAE7BF,EAAAA;AAF6B,CAA1B,CAAL,CAIGG,IAJH,CAISC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAJtB,EAKGC,KALH,CAKSC,OAAO,CAACC,KALjB,CADK;AAQP,OAAO,MAAMC,YAAY,GAAG,CAAC;AAC3BC,EAAAA,UAD2B;AAE3BlB,EAAAA;AAF2B,CAAD,KAMtB;AACJ,MAAImB,GAAG,GAAG,IAAIC,GAAJ,CAAS,GAAEtB,OAAQ,eAAnB,CAAV;AACAqB,EAAAA,GAAG,CAACE,MAAJ,GAAa,IAAIC,eAAJ,CAAoB;AAC/BC,IAAAA,OAAO,EAAEL,UADsB;AAE/B,QAAIlB,MAAM,GAAGD,aAAa,CAACC,MAAD,CAAhB,GAA2B,EAArC;AAF+B,GAApB,EAGVwB,QAHU,EAAb;AAKA,SAAOf,KAAK,CAACU,GAAG,CAACK,QAAJ,EAAD,CAAL,CAAsBb,IAAtB,CAA4BC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAAzC,CAAP;AACD,CAdM;AAgBP,OAAO,MAAMY,sBAAsB,GAAIC,IAAD,IACpCjB,KAAK,CAAE,GAAEX,OAAQ,GAAE4B,IAAK,EAAnB,CAAL,CACGf,IADH,CACSC,QAAD,IAAcA,QAAQ,CAACe,IAAT,EADtB,EAEGhB,IAFH,CAESiB,GAAD,IACJ/B,KAAK,CAAS+B,GAAT,EAAc;AACjBC,EAAAA,cAAc,EAAE;AADC,CAAd,CAHT,EAOGlB,IAPH,CAOQ,CAAC;AAAEmB,EAAAA,IAAF;AAAQC,EAAAA;AAAR,CAAD,KAA2C;AAC/C,MAAIA,MAAM,CAACC,MAAP,GAAgB,CAApB,EAAuB;AACrB,UAAMD,MAAN;AACD;;AACDhB,EAAAA,OAAO,CAACkB,GAAR,CAAY;AAAEH,IAAAA;AAAF,GAAZ;AAEA,SAAOA,IAAI,CAACI,KAAL,CAAW,CAAX,CAAP;AACD,CAdH,EAeGpB,KAfH,CAeSC,OAAO,CAACC,KAfjB,CADK","sourcesContent":["import { parse, ParseResult } from \"papaparse\";\n\nexport const API_URL = \"https://processdrift.ai.wu.ac.at\";\n// const API_URL = 'http://127.0.0.1:5000';\n\nconst cleanUpParams = (params: { [key: string]: any }) =>\n  Object.entries(params).reduce((acc: { [key: string]: any }, [key, value]) => {\n    if (value) {\n      acc[key] = value;\n    }\n\n    return acc;\n  }, {});\nexport const uploadFile = (body: FormData) =>\n  fetch(`${API_URL}/uploadFile`, {\n    method: \"POST\",\n    body,\n  })\n    .then((response) => response.json())\n    .catch(console.error);\n\nexport const makeDriftMap = ({\n  session_id,\n  params,\n}: {\n  session_id: string;\n  params?: { [key: string]: any };\n}) => {\n  let url = new URL(`${API_URL}/makeDriftMap`);\n  url.search = new URLSearchParams({\n    logName: session_id,\n    ...(params ? cleanUpParams(params) : {}),\n  }).toString();\n\n  return fetch(url.toString()).then((response) => response.json());\n};\n\nexport const parseErraticMeasureCsv = (path: string) =>\n  fetch(`${API_URL}${path}`)\n    .then((response) => response.text())\n    .then((res: string) =>\n      parse<string>(res, {\n        skipEmptyLines: true,\n      })\n    )\n    .then(({ data, errors }: ParseResult<string>) => {\n      if (errors.length > 0) {\n        throw errors;\n      }\n      console.log({ data });\n\n      return data.slice(1);\n    })\n    .catch(console.error);\n"]},"metadata":{},"sourceType":"module"}